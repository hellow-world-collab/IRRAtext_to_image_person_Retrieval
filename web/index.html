<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-t-8" />
  <title>YOLOv8 文本检索 Demo</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="card">
    <h1>YOLOv8 + IRRA 视频检索</h1>
    <label class="file-btn">
      选择视频
      <input type="file" id="file" accept="video/*" hidden>
    </label>
    <p id="fileName" class="info">未选择</p>
    <input type="text" id="text" placeholder="如：a man in red hoodie">
    <button id="upload" class="primary">上传并检索 (视频)</button>
    <div id="progressWrap" hidden>
      <p id="progText">上传中…</p>
      <progress id="progBar" value="0" max="100"></progress>
    </div>
    <video id="player" controls hidden></video>
    <a id="download" hidden>下载结果</a>
  </main>

  <main class="card" style="margin-top: 2rem;">
    <h1>YOLOv8 + IRRA 图片检索</h1>
    <label class="file-btn">
      选择图片
      <input type="file" id="imageFile" accept="image/*" hidden>
    </label>
    <p id="imageFileName" class="info">未选择</p>
    <input type="text" id="imageQuery" placeholder="如：a person in blue shirt">

    <div style="margin-top: 1rem; display: flex; align-items: center; justify-content: center; gap: 10px;">
      <label for="threshold" style="font-size: 0.9rem; color: #555;">相似度阈值:</label>
      <input type="number" id="threshold" value="0.15" step="0.01" min="0" max="1" style="width: 80px; padding: .4rem; border: 1px solid #ccc; border-radius: var(--radius);">
    </div>

    <button id="imageSearchBtn" class="primary" style="margin-top: 0.5rem;">上传并检索 (图片)</button>

    <p id="imageStatus" class="info" style="margin-top: 1rem;"></p>
    <div id="imageResultWrap" style="margin-top: 1rem;" hidden>
      <img id="resultImage" style="max-width: 100%; border-radius: var(--radius); border: 1px solid #ccc;" />
      <br>
      <a id="downloadImage" style="margin-top: 1rem; display: inline-block;">下载结果图片</a>
    </div>
  </main>

  <footer>© 2025 Demo | 视频/图片双功能检索</footer>
  <script src="script.js"></script>
</body>
</html>